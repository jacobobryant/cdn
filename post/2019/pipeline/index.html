<html><head><meta charset="utf-8" /><meta content="width=device-width, initial-scale=1" name="viewport" /><link crossorigin="anonymous" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" rel="stylesheet" /><link href="/css/custom.css" rel="stylesheet" /><link href="/favicon.ico" rel="shortcut icon" type="image/x-icon" /><link href="/css/prism.css" rel="stylesheet" /><title>Build Your Own Content Curation Pipeline | Jacob O'Bryant</title><meta content="Jacob O&apos;Bryant" name="author" /><meta content="Build Your Own Content Curation Pipeline | Jacob O&apos;Bryant | Jacob O&apos;Bryant" name="description" /></head><body style="margin-bottom:20px;font-size:16px;font-family:&quot;Helvetica Neue&quot;,Helvetica,Arial,sans-serif"><nav class="navbar navbar-dark bg-dark navbar-expand-md"><div class="container"><ul class="navbar-nav"><li class="nav-item"><a class="navbar-brand" href="https://jacobobryant.com/" style="font-size:22px">Jacob O'Bryant</a></li><li class="nav-item active"><a class="nav-link" href="https://jacobobryant.com/" style="font-size:18px">Articles</a></li><li class="nav-item "><a class="nav-link" href="https://jacobobryant.com/recommendations/" style="font-size:18px">Recommendations</a></li><li class="nav-item "><a class="nav-link" href="https://jacobobryant.com/about/" style="font-size:18px">About</a></li></ul></div></nav><div style="width:25px;height:25px"></div><div class="container"><div class="row"><div class="col-lg-2 d-flex flex-row flex-lg-column align-items-center align-items-lg-start mb-3" style="font-size:14px"><img src="/about/avatar.jpg" width="130px" /><div style="width:20px;height:10px"></div><div><div>Founder @ <a href="https://lagukan.com" target="_blank">Lagukan</a></div><div style="width:5px;height:5px"></div><div><a href="https://tinyletter.com/jacobobryant" target="_blank">Subscribe</a> (<a href="https://jacobobryant.com/atom.xml" target="_blank">feed</a>)</div><div style="width:5px;height:5px"></div><div><a href="https://twitter.com/obryant666" target="_blank">Twitter</a></div></div></div><div class="col-lg" style="max-width:600px"><h3>Build Your Own Content Curation Pipeline</h3><p>December 2019</p><p>I recently added a <a href="/recommendations/">recommendations</a> page to my website. The contents of that page are generated like so:</p><ol><li><p>I save things I like in <a href="https://getpocket.com">Pocket</a>.</p></li><li><p><a href="https://ifttt.com">IFTTT</a> transfers that data into <a href="https://airtable.com">Airtable</a>.</p></li><li><p>Every 30 minutes, a function hosted on <a href="https://repl.it">Repl.it</a> does some post-processing on the data in Airtable.</p></li><li><p>In Airtable, I create a separate view for the different types of links (e.g. music, books, etc).</p></li><li><p>Repl.it exposes some REST endpoints for each view. The endpoints pull data from Airtable and return it as RSS/Atom feeds.</p></li><li><p>My custom static site generator pulls the feed data from Repl.it and renders the recommendations page.</p></li></ol><p>To help with content discovery, Repl.it also sends the feeds to <a href="https://findka.com">Findka</a>, a recommender system I started building recently.</p><p>Continue for instructions on how to set up a pipeline like this for yourself.</p><p><strong>Pocket → Airtable</strong></p><p>First, you need to set up an Airtable base with the right schema. The easiest way is to click "Copy base" (at the bottom of the iframe):</p><iframe class="airtable-embed"
src="https://airtable.com/embed/shr3IOX0OBEG3d8wD?backgroundColor=gray"
frameborder="0" onmousewheel="" width="100%" height="533" style="background:
transparent; border: 1px solid #ccc;"></iframe><div style="height:20px"></div><p>Eventually you'll want to delete the existing records from your copy of this base, but leave them in for now (they make good test data for generating the feeds).</p><p>Make an IFTTT account if you haven't already, then go to <a href="https://ifttt.com/create">ifttt.com/create</a>. For the "If" service, select Pocket. You'll then have a few choices for a trigger. I didn't use Pocket before I set up this pipeline, so I chose "Any new item" as my trigger—i.e. everything that goes into Pocket will be treated by the pipeline as a recommended item and will get sucked into Airtable. If you already use Pocket, you may want to choose "New favorite item" as the trigger instead.</p><p>For the "That" service, choose Airtable. As of writing this, there's only one available trigger: "Create a new record" (so use that one). Set the base to the one you just created, set Table to <code>Links</code>, and set Record content to <code>::airtable::Link::{{Url}} ::airtable::Title::{{Title}} ::airtable::Description::{{Excerpt}} ::airtable::Tags::{{Tags}} ::airtable::Image::{{ImageUrl}}</code>.</p><p>Install the <a href="https://getpocket.com">Pocket extension/app</a> if needed and save something with it. I believe IFTTT will run within an hour, but to test it you can go to the settings page for your applet and click "Check now." Make sure the new data shows up in Airtable.</p><p>Note: if you add tags with Pocket, you must first add those values to the Tags field in Airtable. Otherwise, Airtable will reject the import.</p><p>You could ingest other things into Airtable as well, but Pocket is the only one I've done so far. I'd like to include my top tracks from last.fm at some point.</p><p><strong>Post-processing</strong></p><p>You may want to derive additional information for the Airtable records. For example, I like to add tags based on the URL. Links from goodreads.com get tagged as "book," imdb.com as "movie," etc.</p><p>Make an account at <a href="https://repl.it">Repl.it</a> if you don't already have one, then go to <a href="https://repl.it/@jobryant/Feeds">https://repl.it/@jobryant/Feeds</a> and click "fork." Rename the <code>.env-TEMPLATE</code> file to <code>.env</code> and then enter in the various API keys (<code>.env</code> is only visible to the repl owner). You can get your Airtable API key from <a href="https://airtable.com/account">airtable.com/account</a> and your Base ID from <a href="https://airtable.com/api">airtable.com/api</a>.</p><p>If you'd like to send your public feeds to Findka automatically, get an API key from <a href="https://findka.com">findka.com</a> (under the settings tab after you log in). Otherwise, set <code>EXPORT_TO_FINDKA</code> to <code>false</code> in <code>index.js</code>.</p><p>Hit "run." It'll take a minute for the dependencies to install, after which an embedded browser window will open and display the message "Server running." The URL of the embedded window will be something like <code>https://OrderlySereneRuby.yourusername.repl.co</code>. In <code>index.js</code>, set the <code>ROOT</code> variable to that URL. Then click "restart."</p><p>In the console, you'll see the message <code>Send a GET request to https://YOUR-REPL.repl.co/process to process new Airtable records</code>. When you hit that endpoint, it'll fetch all the records from Airtable where the <code>Processed?</code> field is unchecked. Each record's fields will be passed through the <code>processRecord</code> function, which returns the fields with any desired changes. Those changes will be saved to Airtable, and the <code>Processed?</code> column will be checked. Try hitting the endpoint and make sure the item you saved with Pocket earlier gets processed.</p><p>Finally, make a free account at <a href="https://www.siteuptime.com">siteuptime.com</a> and have it ping the <code>/process</code> endpoint every 30 minutes. (You can set up an applet on IFTTT that will ping Repl.it whenever an Airtable record is created, but it was unreliable for me. Repl.it sleeps during inactivity, and I think IFTTT was timing out while waiting for it to wake up. SiteUptime has been working great though.)</p><p><strong>Feeds</strong></p><p>Go back to Airtable. Notice there are several different <a href="https://support.airtable.com/hc/en-us/articles/202624989-Guide-to-views#whats_a_view">views</a>. I've set up each view with a different filter. For example, the "music" view includes only records that have the "music" tag.</p><p>Look at the <code>Feeds</code> table. The values in the <code>View name</code> column must exactly match the names of any views you want to publish as feeds. You can include additional information for each feed if you like.</p><p>When you start the server on Repl.it, it'll get the contents of the <code>Feeds</code> table and use that to start a bunch of endpoints. You probably saw some lines in the console output saying <code>Published feed at ...</code>. Each feed will be published in three formats: Atom, RSS and JSON. Whenever you update the <code>Feeds</code> table, you'll need to restart your repl.</p><p>In the build process for this website, I <a href="https://github.com/jacobobryant/site/blob/b5df96af893dc5ffe2ec6643df478c893b86d72b/src/site/core.clj#L209">download the JSON and use it to render the recommendations page</a>. On that page you'll notice a bunch of <code>feed</code> links. The build process also <a href="https://github.com/jacobobryant/site/blob/b5df96af893dc5ffe2ec6643df478c893b86d72b/src/site/core.clj#L195">downloads the Atom feeds</a> from Repl.it and <a href="https://github.com/jacobobryant/site/blob/b5df96af893dc5ffe2ec6643df478c893b86d72b/src/site/core.clj#L237">includes them as-is in this website</a>.</p><p>For stability, I like to keep this website static instead of fetching data from Repl.it on-demand. But if your website is already dynamic, you could use Javascript to render the pages instead so that the recommendations are always up-to-date.</p><p><strong>Findka</strong></p><p>If you like feeds, do take a look at <a href="https://findka.com">Findka</a>. It doesn't have enough data to do anything useful yet, but that'll change once enough people import feeds of content they've curated.</p><p>For convenience, I'm planning to rebuild this pipeline within Findka so that people can use it without having to do all the setup work. However, I do like the user control and hackability that comes from using Airtable instead of Findka's database. Maybe I'll replace the other parts of the pipeline but keep Airtable. Let me know if you have an opinion.</p><hr /><p class="small">There's more where that came from if you <a href="https://tinyletter.com/jacobobryant" target="_blank">subscribe</a> to my newsletter.</p></div></div></div><script type="text/javascript">
 var sc_project=12140644;
 var sc_invisible=1;
 var sc_security="e36ded0c";
 var sc_https=1;
 var sc_remove_link=1;
 </script>
 <script type="text/javascript"
 src="https://www.statcounter.com/counter/counter.js"
 async></script>
 <noscript><div class="statcounter"><img class="statcounter"
 src="https://c.statcounter.com/12140644/0/e36ded0c/1/"
 alt="site stats"></div></noscript><script src="/js/prism.js"></script></body></html>